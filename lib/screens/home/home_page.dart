import 'package:elearning/screens/home/components/popular_course.dart';import 'package:elearning/screens/home/components/category_slider.dart';import 'package:elearning/screens/home/components/top_header.dart';import 'package:flutter/material.dart';import 'package:loader_overlay/src/overlay_controller_widget_extension.dart';import 'package:provider/provider.dart';import '../../constants/colors.dart';import '../../view_model/common_view_model.dart';class HomeScreen extends StatefulWidget {  const HomeScreen({Key? key}) : super(key: key);  @override  _HomeScreenState createState() => _HomeScreenState();}class _HomeScreenState extends State<HomeScreen> {  late CommonViewModel _commonProvider;  late ScrollController _scrollController;  @override  void initState() {    super.initState();    WidgetsBinding.instance.addPostFrameCallback((_) {      _commonProvider = Provider.of<CommonViewModel>(context, listen: false);    });    _scrollController = ScrollController()      ..addListener(() {        if (!_scrollController.position.isScrollingNotifier.hasListeners && _scrollController.offset >=            _scrollController.position.maxScrollExtent);      });  }  @override  Widget build(BuildContext context) {    return SafeArea(      child: Consumer<CommonViewModel>(          builder: (context, common, child) {            if(common.showLoading){              context.loaderOverlay.show();            }            if(common.showLoading){              context.loaderOverlay.hide();            }            return NestedScrollView(                headerSliverBuilder: (BuildContext context, bool innerBoxScrolled) {                  return <Widget>[SearchHeader()];                },                body: Container(                  decoration: BoxDecoration(color: default_background),                  child: ListView(                    physics: BouncingScrollPhysics(),                  controller: _scrollController,                    // shrinkWrap: true,                    children: [                      CategorySliderScreen(),                      PopularCourseScreen(),                    ],),                ));          }      ),    );  }  SliverAppBar SearchHeader() {    return SliverAppBar(        automaticallyImplyLeading: false,        backgroundColor: Colors.white,        pinned: true,        floating: true,        snap: false,        expandedHeight: 140,        collapsedHeight: 140,        flexibleSpace: Container(          child: FlexibleSpaceBar(            titlePadding: EdgeInsets.zero,            centerTitle: true,            title: Column(              crossAxisAlignment: CrossAxisAlignment.center,              mainAxisAlignment: MainAxisAlignment.center,              children: [                TopHeader(),              ],            ),          ),        ));  }}