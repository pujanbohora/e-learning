import 'package:elearning/constants/font.dart';import 'package:elearning/screens/home/course_single/components/comment_widget.dart';import 'package:flutter/material.dart';import 'package:flutter/services.dart';import 'package:flutter_svg/svg.dart';import 'package:smooth_star_rating/smooth_star_rating.dart';import 'package:youtube_player_flutter/youtube_player_flutter.dart';import '../../../constants/app_image.dart';import '../../../constants/colors.dart';import '../payment/payment_screen.dart';import 'components/lesson_card.dart';class CourseSingleScreen extends StatefulWidget {  static const routeName = '/courseSingleScreen';  const CourseSingleScreen({Key? key,}) : super(key: key);  @override  _CourseSingleScreenState createState() => _CourseSingleScreenState();}class _CourseSingleScreenState extends State<CourseSingleScreen> {  int _selectedTag = 0;  List<Widget>_inner_inner = [];  void changeTab(int index) {    setState(() {      _selectedTag = index;    });  }  @override  Widget build(BuildContext context) {    return AnnotatedRegion<SystemUiOverlayStyle>(      value: SystemUiOverlayStyle.dark,      child: Scaffold(        backgroundColor: Colors.white,        appBar: AppBar(          backgroundColor: Colors.white,          elevation: 0,          leading: InkWell(            child: const Icon(Icons.arrow_back, color: kBlack,),            onTap: () => Navigator.pop(context),          ),          centerTitle: true,          title: Text("Flutter", style: TextStyle(            fontSize: font_20,            fontWeight: kW8,            color: kBlack,          ),),        ),        body: SafeArea(          child: Padding(            padding: const EdgeInsets.symmetric(horizontal: 20.0, vertical: 5),            child: ListView(              shrinkWrap: true,              // crossAxisAlignment: CrossAxisAlignment.start,              children: [            const SizedBox(              height: 25,            ),            YoutubePlayer(                    controller:  YoutubePlayerController(                      initialVideoId: YoutubePlayer.convertUrlToId("www.youtube.com/watch?v=0Z0Z0Z0Z0Z0").toString(),                      flags: const YoutubePlayerFlags(                        autoPlay: false,                        mute: false,                        showLiveFullscreenButton: false                      ),                    )             ),            const SizedBox(              height: 15,            ),            const Text(              "Futter Novice to Ninja",              style: TextStyle(                fontWeight: FontWeight.w700,                fontSize: 18,              ),            ),            const SizedBox(              height: 3,            ),            const Text(              "Created by DevWheels",              style: TextStyle(                fontWeight: FontWeight.w500,                fontSize: 16,              ),            ),            const SizedBox(              height: 3,            ),            Row(              children: [                SmoothStarRating(                  allowHalfRating: false,                  rating: 4.0,                  isReadOnly: true,                  size: 20,                  starCount: 5,                  color: Colors.yellow.shade700,                  borderColor: Colors.yellow.shade700,                  spacing: 0.0,                ),                const Text(                  " 4.8",                  style: TextStyle(                    color: Colors.grey,                    fontWeight: FontWeight.w500,                    fontSize: 16,                  ),                ),                const SizedBox(                  width: 15,                ),                const Icon(                  Icons.timer,                  color: Colors.grey,                ),                const Text(                  " 72 Hours",                  style: TextStyle(                    color: Colors.grey,                    fontWeight: FontWeight.w500,                    fontSize: 16,                  ),                ),                const Spacer(),                 Text(                  " \$40",                  style: TextStyle(                    color: kBlack,                    fontWeight: kW9,                    fontSize: font_20,                  ),                ),              ],            ),            const SizedBox(              height: 15,            ),            CustomTabView(              index: _selectedTag,              changeTab: changeTab,            ),            Builder(              builder: (context) {                if(_selectedTag == 0){                  _inner_inner.add(PlayList());                }                else if(_selectedTag == 1){                  _inner_inner.add(Description());                }else{                 _inner_inner.add(CommentPost());                }                return _inner_inner[_selectedTag];              }            ),            // _selectedTag == 0 ?  PlayList() : const Description(),                SizedBox(height: 30,),              ],            ),          ),        ),        floatingActionButtonLocation:        FloatingActionButtonLocation.centerDocked,        floatingActionButton: Container(            width: double.infinity,            padding: EdgeInsets.symmetric(horizontal: 10, vertical: 5),            decoration: BoxDecoration(              color: Colors.white,              border: Border(                top: BorderSide(width: 1, color: gray_500),              ),            ),            child: Row(              children: [                Expanded(                  child: ElevatedButton(                      style: ButtonStyle(                        elevation: MaterialStateProperty.all(0),                        backgroundColor:                        MaterialStateProperty.all(kWhite),                        side: MaterialStateProperty.all<BorderSide>(                            const BorderSide(                                width: 1, color: gray_500)),                        minimumSize:                        MaterialStateProperty.all<Size>(                            Size(0, 42)),                      ),                      onPressed: () {                        // Navigator.pushNamed(context, CartSingleScreen.routeName);                      },                      child: Row(                        mainAxisAlignment: MainAxisAlignment.center,                        children: [                          SvgPicture.asset(                            heart,                            color: gray_900,                            height: 20,                          ),                          SizedBox(                            width: 2,                          ),                          Expanded(                            child: Text("0",                                style: TextStyle(                                    fontSize: p3,                                    color: Colors.black)),                          ),                        ],                      )),                ),                SizedBox(                  width: 5,                ), Expanded(                  flex: 4,                  child: Row(                    children: [                      Expanded(                        flex: 2,                        child: ElevatedButton(                            style: ButtonStyle(                              elevation:                              MaterialStateProperty.all(                                  0),                              backgroundColor:                              MaterialStateProperty.all(                                  Color(0xFFF1F3F6)),                              minimumSize:                              MaterialStateProperty.all<                                  Size>(Size(0, 42)),                            ),                            onPressed: () {},                            child: Text("Wishlist",                                style: TextStyle(                                  fontSize: p2,                                  fontWeight: FontWeight.w800,                                  color: gray_900,                                ))),                      ),                      SizedBox(                        width: 5,                      ),                      Expanded(                        flex: 2,                        child: ElevatedButton(                            style: ButtonStyle(                              elevation:                              MaterialStateProperty.all(                                  0),                              backgroundColor:                              MaterialStateProperty.all(                                  kPrimaryColor),                              minimumSize:                              MaterialStateProperty.all<                                  Size>(Size(0, 42)),                            ),                            onPressed: (){                              Navigator.pushNamed(context, PaymentScreen.routeName);                            },                            child: Text("Enroll now",                                style: TextStyle(                                  fontSize: p2,                                  fontWeight: FontWeight.w800,                                  color: gray_900,                                ))),                      ),                    ],                  ),                ),              ],            )),      ),    );  }}class Description extends StatelessWidget {  const Description({Key? key}) : super(key: key);  @override  Widget build(BuildContext context) {    return const Padding(      padding: EdgeInsets.only(top: 20.0),      child: Text(          "Build Flutter iOS and Android Apps with a Single Codebase: Learn Google's Flutter Mobile Development Framework & Dart"),    );  }}class CustomTabView extends StatefulWidget {  final Function(int) changeTab;  final int index;  const CustomTabView({Key? key, required this.changeTab, required this.index})      : super(key: key);  @override  State<CustomTabView> createState() => _CustomTabViewState();}class _CustomTabViewState extends State<CustomTabView> {  final List<String> _tags = ["Playlist (22)", "Description", "Reviews"];  Widget _buildTags(int index) {    return Expanded(child: GestureDetector(      onTap: () {        widget.changeTab(index);      },      child: Container(        padding: EdgeInsets.symmetric(            horizontal: 7, vertical: 15),        decoration: BoxDecoration(          color: widget.index == index ? kPrimaryColor : null,          borderRadius: BorderRadius.circular(10),        ),        child: Center(          child: Text(            _tags[index],            style: TextStyle(              color: widget.index != index ? Colors.black : Colors.white,            ),          ),        ),      ),    ));  }  @override  Widget build(BuildContext context) {    return Container(      padding: const EdgeInsets.all(10),      width: double.infinity,      decoration: BoxDecoration(        borderRadius: BorderRadius.circular(12),        color: Colors.grey.shade200,      ),      child: Row(        mainAxisAlignment: MainAxisAlignment.center,        children: _tags            .asMap()            .entries            .map((MapEntry map) => _buildTags(map.key))            .toList(),      ),    );  }}